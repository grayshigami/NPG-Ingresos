import{a as d,i as c,_ as g}from"./logo-negro-Sinfondo-DYJ1N-ui.js";import{_ as f,c as u,a,t as m,b as s,w as l,v as r,d as h,o as p}from"./index-BF6LzyhM.js";const L={name:"editar-incidencia",data(){return{name:"",actualizacionId:null,incidenciaLocal:{},errorMessage:""}},created(){this.name=localStorage.getItem("name"),this.actualizacionId=localStorage.getItem("user_id")},async mounted(){const n=await d.get(`https://${c}:7207/api/Incidencia/${this.$route.query.incidencia}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});this.incidenciaLocal=n.data},methods:{async updateIncidencia(){console.log(this.incidenciaLocal);try{this.incidenciaLocal.nombre||(this.errorMessage="El nombre no debe quedar vacío"),this.incidenciaLocal.actualizacionId=this.actualizacionId;let n={...this.incidenciaLocal};delete n.id;const e=await d.put(`https://${c}:7207/api/Incidencia/${this.incidenciaLocal.id}`,n,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});console.log("Incidencia actualizada:",e.data),this.$router.back()}catch(n){console.error(n)}},logout(){localStorage.removeItem("token"),window.location.href="/login-component"},goBack(){this.$router.back()}}},I={class:"general"},b={class:"toolbar"},k={class:"b-user"},v={class:"form-data"},y={key:0};function S(n,e,w,x,o,t){return p(),u("div",I,[a("div",b,[e[9]||(e[9]=a("img",{src:g,alt:"",width:"10%",height:"10%"},null,-1)),a("h2",k,"Bienvenido "+m(o.name),1),e[10]||(e[10]=a("div",{class:"spacer"},null,-1)),a("button",{onClick:e[0]||(e[0]=(...i)=>t.logout&&t.logout(...i))},e[8]||(e[8]=[a("i",{class:"fa-solid fa-power-off"},null,-1),s(" Cerrar sesión ")]))]),a("div",v,[e[13]||(e[13]=a("h1",null,"Editar ingreso",-1)),l(a("input",{type:"text",placeholder:"Nombre",name:"nombre","onUpdate:modelValue":e[1]||(e[1]=i=>o.incidenciaLocal.nombre=i)},null,512),[[r,o.incidenciaLocal.nombre]]),l(a("input",{type:"text",placeholder:"Empresa",name:"empresa","onUpdate:modelValue":e[2]||(e[2]=i=>o.incidenciaLocal.empresa=i)},null,512),[[r,o.incidenciaLocal.empresa]]),l(a("input",{type:"datetime-local",placeholder:"Entrada",name:"horaEntrada","onUpdate:modelValue":e[3]||(e[3]=i=>o.incidenciaLocal.horaEntrada=i)},null,512),[[r,o.incidenciaLocal.horaEntrada]]),l(a("input",{type:"datetime-local",placeholder:"Salida",name:"horaSalida","onUpdate:modelValue":e[4]||(e[4]=i=>o.incidenciaLocal.horaSalida=i)},null,512),[[r,o.incidenciaLocal.horaSalida]]),l(a("input",{type:"text",placeholder:"Comentario",name:"comentario","onUpdate:modelValue":e[5]||(e[5]=i=>o.incidenciaLocal.comentario=i)},null,512),[[r,o.incidenciaLocal.comentario]]),a("button",{onClick:e[6]||(e[6]=(...i)=>t.updateIncidencia&&t.updateIncidencia(...i))},e[11]||(e[11]=[a("i",{class:"fa-solid fa-floppy-disk"},null,-1),s(" Guardar ")])),a("button",{onClick:e[7]||(e[7]=i=>t.goBack())},e[12]||(e[12]=[a("i",{class:"fa-solid fa-arrow-left"},null,-1),s(" Volver ")])),o.errorMessage?(p(),u("p",y,m(o.errorMessage),1)):h("",!0)])])}const B=f(L,[["render",S]]);export{B as default};
