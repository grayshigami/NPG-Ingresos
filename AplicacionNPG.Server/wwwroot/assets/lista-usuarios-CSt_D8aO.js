import{a as n,i as u,_ as U}from"./logo-negro-Sinfondo-DYJ1N-ui.js";import f from"./crear-usuario-BIQNEPeY.js";import b from"./editar-usuario-EjEojdvl.js";import{_ as C,r as g,c as d,a as o,t as a,b as m,e as v,F as k,f as w,g as A,d as E,o as l}from"./index-BF6LzyhM.js";import"./_commonjsHelpers-C4iS2aBk.js";const y={name:"lista-usuarios",components:f,EditarUsuario:b,data(){return{usuarios:[],name:"",showAll:!1}},created(){this.name=localStorage.getItem("name")},mounted(){this.getUsuarios()},methods:{async getUsuarios(){try{let e;this.showAll?e=await n.get(`https://${u}:7207/api/Usuario`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}):e=await n.get(`https://${u}:7207/api/Usuario/usuarios-activos`,{params:{estado:1},headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),this.usuarios=e.data}catch(e){console.error(e)}},showAllUsers(){this.showAll=!this.showAll,this.getUsuarios()},editUsuario(e){this.$router.push({name:"editar-usuario",query:{usuario:e.id}})},async toggleEstado(e){console.log(e.estado);try{await n.put(`https://${u}:7207/api/Usuario/cambiar-estado/${e.id}`,null,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),this.getUsuarios()}catch(t){console.error(t)}console.log(e.estado)},async agregarElemento(e){this.usuarios.push(e)},logout(){localStorage.removeItem("token"),window.location.href="/login-component"},goToCreate(){this.$router.push("/crear-usuario")},goToEdit(){this.$router.push("/editar-usuario")}}},B={class:"general"},N={class:"toolbar"},T={class:"b-user"},I={class:"screen-data"},S={class:"table-data"},V=["onClick","disabled"],_=["onClick"];function $(e,t,z,x,i,r){const p=g("CrearUsuario"),h=g("EditarUsuario");return l(),d("div",B,[o("div",N,[t[4]||(t[4]=o("img",{src:U,alt:"",width:"10%",height:"10%"},null,-1)),o("h2",T,"Bienvenido "+a(i.name),1),t[5]||(t[5]=o("div",{class:"spacer"},null,-1)),o("button",{onClick:t[0]||(t[0]=(...s)=>r.logout&&r.logout(...s))},t[3]||(t[3]=[o("i",{class:"fa-solid fa-power-off"},null,-1),m(" Cerrar sesiÃ³n ")]))]),o("div",I,[o("button",{onClick:t[1]||(t[1]=(...s)=>r.goToCreate&&r.goToCreate(...s))},t[6]||(t[6]=[o("i",{class:"fa-solid fa-plus"},null,-1),m(" Crear usuario ")])),o("button",{onClick:t[2]||(t[2]=(...s)=>r.showAllUsers&&r.showAllUsers(...s))},[t[7]||(t[7]=o("i",{class:"fa-solid fa-eye"},null,-1)),m(" "+a(i.showAll?"Ver activos":"Ver inactivos"),1)])]),v(p,{onNuevoElemento:r.agregarElemento},null,8,["onNuevoElemento"]),o("div",S,[o("table",null,[t[10]||(t[10]=o("thead",null,[o("tr",null,[o("th",null,"Nombre"),o("th",null,"Apellido"),o("th",null,"Nombre de usuario"),o("th",null,"Correo"),o("th",null,"Tipo de usuario"),o("th",null,"Estado"),o("th",null,"Opciones")])],-1)),o("tbody",null,[(l(!0),d(k,null,w(i.usuarios,s=>(l(),d("tr",{key:s.id},[o("td",null,a(s.nombre),1),o("td",null,a(s.apellido),1),o("td",null,a(s.nombreUsuario),1),o("td",null,a(s.correo),1),o("td",null,a(s.tipoUsuario==0?"Usuario":"Administrador"),1),o("td",null,a(s.estado===1?"Activo":"Inactivo"),1),o("td",null,[o("button",{onClick:c=>r.editUsuario(s),disabled:s.estado===0},t[8]||(t[8]=[o("i",{class:"fa-solid fa-pencil"},null,-1)]),8,V),o("button",{onClick:c=>r.toggleEstado(s)},t[9]||(t[9]=[o("i",{class:"fa-solid fa-power-off"},null,-1)]),8,_)])]))),128))])]),e.userToEdit?(l(),A(h,{key:0,usuario:e.userToEdit,onUsuarioUpdated:e.onUsuarioUpdated},null,8,["usuario","onUsuarioUpdated"])):E("",!0)])])}const j=C(y,[["render",$]]);export{j as default};
